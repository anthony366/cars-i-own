<div class="flyout-menu">
	<div class="flyout-menu__header">
		<span class="flyout-menu__title cui-gamma">Menu Title
			<div class="icon--target">
				<cui-icon class="js-close">
					<svg class="icon-close">
						<use xlink:href="#icon-close">
					</svg>
				</cui-icon>
			</div>
		</span>
		<div class="flyout-menu__info">
			<div class="flyout-menu__count"><span>0</span> matches</div>
			<div class="flyout-menu__apply">
				<a class="cui-button cui-button--fluid">Apply</a>
			</div>
		</div>
	</div>
	<div class="flyout-menu__content">
		<form>
			<div class="checkbox checkAll">
				<input class="checkbox__input" value="0" id="checkAll" type="checkbox">
				<label class="checkbox__label" for="checkAll">All</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="900" id="checkbox-24" type="checkbox">
				<label class="checkbox__label" for="checkbox-24">2016</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="700" id="checkbox-23" type="checkbox">
				<label class="checkbox__label" for="checkbox-23">2015</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="600" id="checkbox-22" type="checkbox">
				<label class="checkbox__label" for="checkbox-22">2014</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="450" id="checkbox-21" type="checkbox">
				<label class="checkbox__label" for="checkbox-21">2013</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="425" id="checkbox-20" type="checkbox">
				<label class="checkbox__label" for="checkbox-20">2012</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="250" id="checkbox-19" type="checkbox">
				<label class="checkbox__label" for="checkbox-19">2011</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="425" id="checkbox-18" type="checkbox">
				<label class="checkbox__label" for="checkbox-18">2010</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="300" id="checkbox-17" type="checkbox">
				<label class="checkbox__label" for="checkbox-17">2009</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="190" id="checkbox-16" type="checkbox">
				<label class="checkbox__label" for="checkbox-16">2008</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="200" id="checkbox-18" type="checkbox">
				<label class="checkbox__label" for="checkbox-18">2007</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="350" id="checkbox-17" type="checkbox">
				<label class="checkbox__label" for="checkbox-17">2006</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input"  value="125" id="checkbox-16" type="checkbox">
				<label class="checkbox__label" for="checkbox-16">2005</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="475" id="checkbox-15" type="checkbox">
				<label class="checkbox__label" for="checkbox-15">2004</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="525" id="checkbox-14" type="checkbox">
				<label class="checkbox__label" for="checkbox-14">2003</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="600" id="checkbox-13" type="checkbox">
				<label class="checkbox__label" for="checkbox-13">2002</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="120" id="checkbox-12" type="checkbox">
				<label class="checkbox__label" for="checkbox-12">2001</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="80" id="checkbox-11" type="checkbox">
				<label class="checkbox__label" for="checkbox-11">2000</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="130" id="checkbox-10" type="checkbox">
				<label class="checkbox__label" for="checkbox-10">1990s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="100" id="checkbox-9" type="checkbox">
				<label class="checkbox__label" for="checkbox-9">1980s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="50" id="checkbox-8" type="checkbox">
				<label class="checkbox__label" for="checkbox-8">1970s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="20" id="checkbox-7" type="checkbox">
				<label class="checkbox__label" for="checkbox-7">1960s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="60" id="checkbox-6" type="checkbox">
				<label class="checkbox__label" for="checkbox-6">1950s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="35"id="checkbox-5" type="checkbox">
				<label class="checkbox__label" for="checkbox-5">1940s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="10" id="checkbox-4" type="checkbox">
				<label class="checkbox__label" for="checkbox-4">1930s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="10" id="checkbox-3" type="checkbox">
				<label class="checkbox__label" for="checkbox-3">1920s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="10" id="checkbox-2" type="checkbox">
				<label class="checkbox__label" for="checkbox-2">1910s</label>
			</div>
			<div class="checkbox">
				<input class="checkbox__input" value="10" id="checkbox-1" type="checkbox">
				<label class="checkbox__label" for="checkbox-1">1900s</label>
			</div>
			
		</form>
	</div>
	<div class="flyout-menu__footer">
		<small>Sponsored By Ford <strong>Want Performance?</strong> <a href="#">Dynamically designed 2015 Ford Fusion</a></small>
	</div>
</div>

<script>

$(function() {
	$(".flyout-menu__content .checkbox").on("click", function() {
		var item = $(this);
        var checkbox = item.find('input[type=checkbox]');
        item.toggleClass('selected');

        if (checkbox.length) {
            // toggle the checkbox state from parent div
            checkbox.prop('checked', !checkbox.prop('checked'));
            getMatches();
        }
        // toggle the checkbox state from checkbox
        if (checkbox.prop('checked')) {
        	item.addClass('selected');

        	 // get match data
        	checkbox.change(function() {
			  	getMatches();
			});

        } else {
        	item.removeClass('selected');
        }
	});
	// check all menu items
	$(".flyout-menu__content .checkAll").click(function () {
	    $("input:checkbox").prop('checked', $("input:checkbox").prop("checked"));
	    if ($(this).hasClass('selected')) {
	    	$(this).siblings('.checkbox').addClass('selected');
	    	$('.flyout-menu__count span').text('7150');
	    } else {
	    	$(this).siblings('.checkbox').removeClass('selected');
	    	$('.flyout-menu__count span').text('0');
	    }
	});

	// function for retrieving match data
	function getMatches() {
		var sum = 0;

	    $("input[type=checkbox]:checked").each(function(){
	      sum += parseInt($(this).val());
	    });

		$('.flyout-menu__count span').text(sum);
	}

});
